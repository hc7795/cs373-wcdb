{% extends "base.html" %}
{% block head %}
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/search.css">
{% endblock %}

{% block page_header %}
<p>Search website for crises, organizations, and people.</p>
{% endblock %}


{% block content %}

	<form id="search_bar" method="GET">
	        <input type="text" class="tftextinput" name="q" size="21" maxlength="120"><input type="submit" value="search" class="tfbutton">
	</form>
	<div class="clearfix">

	{% if searched %}

		{% if queryString == '' %}
			<div class="results_header">Please enter a search term.</div>
		{% elif not foundCrises and not foundPeople and not foundOrgs %}
			<div class="results_header">No search results were found for '{{queryString}}'.</div>
		{% else %}

			<div class="results_header">Search results for '{{ queryString }}':</div>

			{% if foundCrises %}
				<div class="results_category">
					<h2>Matching crises:</h2>
					<ol>
						{% for crisis, matches in foundCrises.items %}
							<li><a class="yellow" href="/crisis/{{crisis.slug}}"><h3>{{crisis.name}}</h3></a></li>
							<ul>
								{% for match, context in matches %}
									<li><span class="italic bold">{{match}}:</span> {{context}}</li>
								{% endfor %}
							</ul>
						{% endfor %}
					</ol>
				</div>
			{% endif %}

			{% if foundPeople %}
				<div class="results_category">
					<h2>Matching people:</h2>
					<ol>
						{% for person, matches in foundPeople.items %}
							<li><a class="yellow" href="/person/{{person.slug}}"><h3>{{person.name}}</h3></a></li>
							<ul>
								{% for match, context in matches %}
									<li><span class="italic bold">{{match}}:</span> {{context}}</li>
								{% endfor %}
							</ul>
						{% endfor %}
					</ol>
				</div>
			{% endif %}

			{% if foundCrises %}
				<div class="results_category">
					<h2>Matching organizations:</h2>
					<ol>
						{% for org, matches in foundOrgs.items %}
							<li><a class="yellow" href="/org/{{org.slug}}"><h3>{{org.name}}</h3></a></li>
							<ul>
								{% for match, context in matches %}
									<li><span class="italic bold">{{match}}:</span> {{context}}</li>
								{% endfor %}
							</ul>
						{% endfor %}
					</ol>
				</div>
			{% endif %}
		{% endif %}

	{% endif %}


{% endblock %}
